(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{380:function(e,t,n){},398:function(e,t,n){},435:function(e,t,n){},436:function(e,t,n){},437:function(e,t,n){},458:function(e,t,n){},459:function(e,t,n){},561:function(e,t,n){},562:function(e,t,n){"use strict";n.r(t);var c=n(111),r=n.n(c),a=n(565),o=n(360),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,597)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))},i=n(2),u=n(0),l=n(28),j=n(362),b=n(586),d=n(36),m=n(25),O=n(583),h=n(584),p=(n(379),n(380),n(47)),f=n(215),x=n(12),g=n(346),A={user:null};if(localStorage.getItem("jwtToken")){var v=Object(g.a)(localStorage.getItem("jwtToken"));1e3*v.exp<Date.now()?(localStorage.removeItem("jwtToken"),A.user=null):A.user=v}var C=Object(u.createContext)({user:null,login:function(e){},logout:function(){}});function y(e,t){switch(t.type){case"LOGIN":return Object(p.a)(Object(p.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(p.a)(Object(p.a)({},e),{},{user:null});default:return e}}function I(e){var t=e.children,n=Object(u.useReducer)(y,A),c=Object(x.a)(n,2),r=c[0],a=c[1];return Object(i.jsx)(C.Provider,{value:{user:r.user,login:function(e){localStorage.setItem("jwtToken",e.token),a({type:"LOGIN",payload:e})},logout:function(){localStorage.removeItem("jwtToken"),a({type:"LOGOUT"})}},children:t})}var S=function(e){var t=e.component,n=Object(f.a)(e,["component"]),c=Object(u.useContext)(C).user;return Object(i.jsx)(m.b,Object(p.a)(Object(p.a)({},n),{},{render:function(e){return c?Object(i.jsx)(m.a,{to:"/"}):Object(i.jsx)(t,Object(p.a)({},e))}}))};var k=function(e){var t=e.component,n=Object(f.a)(e,["component"]),c=Object(u.useContext)(C).user;return Object(i.jsx)(m.b,Object(p.a)(Object(p.a)({},n),{},{render:function(e){return c?Object(i.jsx)(t,Object(p.a)({},e)):Object(i.jsx)(m.a,{to:"/login"})}}))},w=n(45),P=n(588),N=n(593),E=n(23),R=n.n(E),T=n(180),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(u.useState)(t),c=Object(x.a)(n,2),r=c[0],a=c[1],o=function(e){a(Object(p.a)(Object(p.a)({},r),{},Object(T.a)({},e.target.name,e.target.value)))},s=function(t){t.preventDefault(),e()};return{onChange:o,onSubmit:s,values:r}};function L(){var e=Object(w.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      email\n      username\n      createdAt\n      token\n    }\n  }\n"]);return L=function(){return e},e}function U(e){var t=Object(u.useContext)(C),n=Object(u.useState)({}),c=Object(x.a)(n,2),r=c[0],a=c[1],o=D((function(){O()}),{username:"",password:""}),s=o.onChange,j=o.onSubmit,b=o.values,d=Object(l.useMutation)(Q,{onCompleted:function(n){t.login(n.login),e.history.push("/")},variables:b,onError:function(e){console.log("Login Error:",e),e.graphQLErrors&&a(e.graphQLErrors[0].extensions.exception.errors)}}),m=Object(x.a)(d,2),O=m[0],h=m[1].loading;return Object(i.jsxs)("div",{className:"form-container",children:[Object(i.jsxs)(P.a,{onSubmit:j,noValidate:!0,className:h?"loading":"",children:[Object(i.jsx)("h1",{children:"Login"}),Object(i.jsx)(P.a.Input,{label:"Username",placeholder:"Username...",name:"username",type:"text",value:b.username,onChange:s,error:!(!r||!r.username)}),Object(i.jsx)(P.a.Input,{label:"Password",placeholder:"Password...",type:"password",name:"password",value:b.password,onChange:s,error:!(!r||!r.password)}),Object(i.jsx)(N.a,{type:"submit",primary:!0,style:{background:"#00b5ad"},children:"Login"})]}),h?Object(i.jsx)("p",{children:"Logging in user..."}):"",r&&Object.keys(r).length>0&&Object(i.jsx)("div",{className:"ui error message",children:Object(i.jsx)("ul",{className:"list",children:Object.values(r).map((function(e){return Object(i.jsx)("li",{children:e},e)}))})})]})}var Q=R()(L()),M=n(596),B=n(590),_=n(592),$=n(361),F=n(149),V=n(212),G=n(161),Y=n.n(G),J=n(587);var W=function(e){var t=e.content,n=e.children;return Object(i.jsx)(J.a,{inverted:!0,content:t,trigger:n})};function q(){var e=Object(w.a)(["\n  mutation likePost($postId: ID!) {\n    likePost(postId: $postId) {\n      id\n      likes {\n        id\n        username\n      }\n      likeCount\n    }\n  }\n"]);return q=function(){return e},e}var K=R()(q()),z=function(e){var t=e.user,n=e.post,c=n.id,r=n.likeCount,a=n.likes,o=Object(u.useState)(!1),s=Object(x.a)(o,2),j=s[0],b=s[1];Object(u.useEffect)((function(){t&&a.find((function(e){return e.username===t.username}))?b(!0):b(!1)}),[t,a]);var m=Object(l.useMutation)(K,{variables:{postId:c}}),O=Object(x.a)(m,1)[0],h=t?j?Object(i.jsx)(N.a,{color:"teal",children:Object(i.jsx)(F.a,{name:"heart"})}):Object(i.jsx)(N.a,{color:"teal",basic:!0,children:Object(i.jsx)(F.a,{name:"heart"})}):Object(i.jsx)(N.a,{as:d.b,to:"/login",color:"teal",basic:!0,children:Object(i.jsx)(F.a,{name:"heart"})});return Object(i.jsxs)(N.a,{as:"div",labelPosition:"right",onClick:O,children:[Object(i.jsx)(W,{content:j?"Unlike":"Like",children:h}),Object(i.jsx)(V.a,{basic:!0,color:"teal",pointing:"left",children:r})]})},H=n(591);function X(){var e=Object(w.a)(["\n  {\n    getPosts {\n      id\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n    }\n  }\n"]);return X=function(){return e},e}var Z=R()(X());function ee(){var e=Object(w.a)(["\n  mutation deleteComment($postId: ID!, $commentId: ID!) {\n    deleteComment(postId: $postId, commentId: $commentId) {\n      id\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n      commentCount\n    }\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(w.a)(["\n  mutation deletePost($postId: ID!) {\n    deletePost(postId: $postId)\n  }\n"]);return te=function(){return e},e}var ne=R()(te()),ce=R()(ee()),re=function(e){var t=e.postId,n=e.commentId,c=e.refetch,r=e.callback,a=Object(u.useState)(!1),o=Object(x.a)(a,2),s=o[0],j=o[1],b=n?ce:ne,d=Object(l.useMutation)(b,{variables:{postId:t,commentId:n},update:function(e,c){if(j(!1),!n){var a=e.readQuery({query:Z});e.writeQuery({query:Z,data:{getPosts:a.getPosts.filter((function(e){return e.id!==t}))}})}r&&r()},onCompleted:function(){c()},onError:function(e){return console.log(h),e}}),m=Object(x.a)(d,2),O=m[0],h=m[1].error;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(W,{content:n?"Delete comment":"Delete post",children:Object(i.jsx)(N.a,{as:"div",color:"red",floated:"right",onClick:function(){return j(!0)},children:Object(i.jsx)(F.a,{name:"trash",style:{margin:0}})})}),Object(i.jsx)(H.a,{open:s,onCancel:function(){return j(!1)},onConfirm:O})]})};var ae=function(e){var t=e.post,n=t.body,c=t.createdAt,r=t.id,a=t.username,o=t.likeCount,s=t.commentCount,l=t.likes,j=e.refetch,b=Object(u.useContext)(C).user;return Object(i.jsxs)(_.a,{fluid:!0,children:[Object(i.jsxs)(_.a.Content,{children:[Object(i.jsx)($.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/molly.png"}),Object(i.jsx)(_.a.Header,{children:a}),Object(i.jsx)(_.a.Meta,{as:d.b,to:"/posts/".concat(r),children:Y()(c).fromNow(!0)}),Object(i.jsx)(_.a.Description,{children:n})]}),Object(i.jsxs)(_.a.Content,{extra:!0,children:[Object(i.jsx)(z,{user:b,post:{id:r,likes:l,likeCount:o}}),Object(i.jsx)(W,{content:"Comment on post",children:Object(i.jsxs)(N.a,{labelPosition:"right",as:d.b,to:"/posts/".concat(r),children:[Object(i.jsx)(N.a,{color:"blue",basic:!0,children:Object(i.jsx)(F.a,{name:"comments"})}),Object(i.jsx)(V.a,{basic:!0,color:"blue",pointing:"left",children:s})]})}),b&&b.username===a&&Object(i.jsx)(re,{refetch:j,postId:r})]})]})},oe=n(84);function se(){var e=Object(w.a)(["\n  mutation createPost($body: String!) {\n    createPost(body: $body) {\n      id\n      body\n      createdAt\n      username\n      comments {\n        id\n        body\n        username\n        createdAt\n      }\n      likes {\n        id\n        username\n        createdAt\n      }\n      likeCount\n      commentCount\n    }\n  }\n"]);return se=function(){return e},e}function ie(){var e=D((function(){o()}),{body:""}),t=e.values,n=e.onChange,c=e.onSubmit,r=Object(l.useMutation)(ue,{variables:t,update:function(e,n){var c=e.readQuery({query:Z});e.writeQuery({query:Z,data:{getPosts:[n.data.createPost].concat(Object(oe.a)(c.getPosts))}}),t.body=""},onError:function(e){return e}}),a=Object(x.a)(r,2),o=a[0],s=a[1].error;return s?"Error: ".concat(s):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(P.a,{onSubmit:c,children:[Object(i.jsx)("h2",{children:"Create a post: "}),Object(i.jsx)(P.a.Field,{children:Object(i.jsx)(P.a.Input,{placeholder:"Hi World!",name:"body",onChange:n,value:t.body,error:!!s})})]}),s&&Object(i.jsx)("div",{className:"ui error message",style:{marginBottom:20},children:Object(i.jsx)("ul",{className:"list",children:Object(i.jsx)("li",{children:s.graphQLErrors[0].message})})})]})}var ue=R()(se());var le=function(){var e=Object(u.useContext)(C).user,t=Object(l.useQuery)(Z,{notifyOnNetworkStatusChange:!0,onError:function(e){console.log("Login Error:",e)}}),n=t.loading,c=t.data,r=t.networkStatus,a=t.refetch;return r===l.NetworkStatus.refetch?Object(i.jsx)("h1",{children:"Refetching posts..."}):n?Object(i.jsx)("h1",{children:"Loading posts.."}):Object(i.jsxs)(M.a,{columns:3,children:[Object(i.jsx)(M.a.Row,{className:"page-title",children:Object(i.jsx)("h1",{children:"Recent Posts"})}),Object(i.jsxs)(M.a.Row,{children:[e&&Object(i.jsx)(M.a.Column,{children:Object(i.jsx)(ie,{})}),Object(i.jsx)(B.a.Group,{children:c&&c.getPosts.map((function(e){return Object(i.jsx)(M.a.Column,{style:{marginBottom:20},children:Object(i.jsx)(ae,{post:e,refetch:a})},e.id)}))})]})]})},je=n(352),be=n.n(je);function de(){var e=Object(w.a)(["\n  mutation register(\n    $username: String!\n    $email: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    register(\n      registerInput: {\n        username: $username\n        email: $email\n        password: $password\n        confirmPassword: $confirmPassword\n      }\n    ) {\n      id\n      email\n      username\n      createdAt\n      token\n    }\n  }\n"]);return de=function(){return e},e}function me(e){var t=Object(u.useContext)(C),n=Object(u.useState)({}),c=Object(x.a)(n,2),r=c[0],a=c[1],o=D((function(){O()}),{username:"",email:"",password:"",confirmPassword:""}),s=o.onChange,j=o.onSubmit,b=o.values;var d=Object(l.useMutation)(Oe,{onCompleted:function(n){t.login(n.register),e.history.push("/")},onError:function(e){e.graphQLErrors[0].extensions.errors&&a(e.graphQLErrors[0].extensions.errors)},variables:b}),m=Object(x.a)(d,2),O=m[0],h=m[1].loading;return Object(i.jsxs)("div",{className:"form-container",children:[Object(i.jsxs)(P.a,{onSubmit:function(e){j(e),Object.values(r).length>0?console.log("Error in registration, no email sent"):function(e){e.preventDefault(),be.a.sendForm("service_cq1lphn","template_2cjy2s5",e.target,"user_YL0QphQPVpDYsNXWThcTP").then((function(e){console.log(e.text)}),(function(e){console.log(e.text)}))}(e)},noValidate:!0,className:h?"loading":"",children:[Object(i.jsx)("h1",{children:"Register"}),Object(i.jsx)(P.a.Input,{label:"Username",placeholder:"Username...",name:"username",type:"text",value:b.username,onChange:s,error:!(!r||!r.username)}),Object(i.jsx)(P.a.Input,{label:"Email",placeholder:"Email...",name:"email",type:"email",value:b.email,onChange:s,error:!(!r||!r.email)}),Object(i.jsx)(P.a.Input,{label:"Password",placeholder:"Password...",type:"password",name:"password",value:b.password,onChange:s,error:!(!r||!r.password)}),Object(i.jsx)(P.a.Input,{label:"Confirm Password",placeholder:"ConfirmPassword",type:"password",name:"confirmPassword",value:b.confirmPassword,onChange:s,error:!(!r||!r.confirmPassword)}),Object(i.jsx)(N.a,{type:"submit",primary:!0,style:{background:"#00b5ad"},children:"Register"})]}),h?Object(i.jsx)("p",{children:"Registering user..."}):"",r&&Object.keys(r).length>0&&Object(i.jsx)("div",{className:"ui error message",children:Object(i.jsx)("ul",{className:"list",children:Object.values(r).map((function(e){return Object(i.jsx)("li",{children:e},e)}))})})]})}var Oe=R()(de()),he=n(589);var pe=function(){var e=Object(u.useContext)(C),t=e.user,n=e.logout,c=window.location.pathname,r="/"===c?"home":c.substr(1),a=Object(u.useState)(r),o=Object(x.a)(a,2),s=o[0],l=o[1],j=function(e,t){var n=t.name;return l(n)};return t?Object(i.jsxs)(he.a,{pointing:!0,secondary:!0,size:"massive",color:"teal",children:[Object(i.jsx)(he.a.Item,{name:t.username,active:s===t.username,onClick:j,as:d.b,to:"/"}),Object(i.jsxs)(he.a.Menu,{position:"right",children:[Object(i.jsx)(he.a.Item,{name:"Live Chat",active:"Live Chat"===s,onClick:j,as:d.b,to:"/join"}),Object(i.jsx)(he.a.Item,{name:"logout",onClick:n,as:d.b,to:"/login"})]})]}):Object(i.jsxs)(he.a,{pointing:!0,secondary:!0,size:"massive",color:"teal",children:[Object(i.jsx)(he.a.Item,{name:"home",active:"home"===s,onClick:j,as:d.b,to:"/"}),Object(i.jsxs)(he.a.Menu,{position:"right",children:[Object(i.jsx)(he.a.Item,{name:"login",active:"login"===s,onClick:j,as:d.b,to:"/login"}),Object(i.jsx)(he.a.Item,{name:"register",active:"register"===s,onClick:j,as:d.b,to:"/register"}),Object(i.jsx)(he.a.Item,{name:"News",active:"news"===s,onClick:j,as:d.b,to:"/news"})]})]})};function fe(){var e=Object(w.a)(["\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      id\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n    }\n  }\n"]);return fe=function(){return e},e}function xe(){var e=Object(w.a)(["\n  mutation($postId: ID!, $body: String!) {\n    createComment(postId: $postId, body: $body) {\n      body\n      username\n      comments {\n        id\n        body\n        createdAt\n        username\n      }\n      commentCount\n    }\n  }\n"]);return xe=function(){return e},e}var ge,Ae=R()(xe()),ve=R()(fe()),Ce=function(e){var t,n=e.match.params.postId,c=Object(u.useContext)(C).user,r=Object(u.useRef)(null),a=Object(l.useQuery)(ve,{variables:{postId:n}}).data,o=Object(u.useState)(""),s=Object(x.a)(o,2),j=s[0],b=s[1],d=Object(l.useMutation)(Ae,{onCompleted:function(){b(""),r.current.blur()},variables:{body:j,postId:n}}),m=Object(x.a)(d,1)[0];if(a){var O=a.getPost,h=O.id,p=O.body,f=O.createdAt,g=O.username,A=O.comments,v=O.likes,y=O.likeCount,I=O.commentCount;t=Object(i.jsx)(M.a,{children:Object(i.jsxs)(M.a.Row,{children:[Object(i.jsx)(M.a.Column,{width:2,children:Object(i.jsx)($.a,{src:"https://react.semantic-ui.com/images/avatar/large/molly.png",size:"small",float:"right"})}),Object(i.jsxs)(M.a.Column,{width:10,children:[Object(i.jsxs)(_.a,{fluid:!0,children:[Object(i.jsxs)(_.a.Content,{children:[Object(i.jsx)(_.a.Header,{children:g}),Object(i.jsx)(_.a.Meta,{children:Y()(f).fromNow()}),Object(i.jsx)(_.a.Description,{children:p})]}),Object(i.jsx)("hr",{}),Object(i.jsxs)(_.a.Content,{extra:!0,children:[Object(i.jsx)(z,{user:c,post:{id:h,likeCount:y,likes:v}}),Object(i.jsx)(W,{content:"Comment on post",children:Object(i.jsxs)(N.a,{as:"div",labelPosition:"right",onClick:function(){return console.log("Comment on post")},children:[Object(i.jsx)(N.a,{basic:!0,color:"blue",children:Object(i.jsx)(F.a,{name:"comments"})}),Object(i.jsx)(V.a,{basic:!0,color:"blue",pointing:"left",children:I})]})}),c&&c.username===g&&Object(i.jsx)(re,{postId:h,callback:function(){e.history.push("/")}})]})]}),c&&Object(i.jsx)(_.a,{fluid:!0,children:Object(i.jsxs)(_.a.Content,{children:[Object(i.jsx)("p",{children:"Post a comment"}),Object(i.jsx)(P.a,{children:Object(i.jsxs)("div",{className:"ui action input fluid",children:[Object(i.jsx)("input",{type:"text",placeholder:"Comment..",name:"comment",value:j,onChange:function(e){return b(e.target.value)},ref:r}),Object(i.jsx)("button",{type:"submit",className:"ui button teal",disabled:""===j.trim(),onClick:m,children:"Submit"})]})})]})}),A.map((function(e){return Object(i.jsx)(_.a,{fluid:!0,children:Object(i.jsxs)(_.a.Content,{children:[c&&c.username===e.username&&Object(i.jsx)(re,{postId:h,commentId:e.id}),Object(i.jsx)(_.a.Header,{children:e.username}),Object(i.jsx)(_.a.Meta,{children:Y()(e.createdAt).fromNow()}),Object(i.jsx)(_.a.Description,{children:e.body})]})},e.id)}))]})]})})}else t=Object(i.jsx)("p",{children:"Loading post..."});return t},ye=(n(398),function(){var e=Object(u.useState)(""),t=Object(x.a)(e,2),n=t[0],c=t[1],r=Object(u.useState)(""),a=Object(x.a)(r,2),o=a[0],s=a[1];return Object(i.jsx)("div",{id:"join",children:Object(i.jsxs)("div",{className:"joinInnerContainer",children:[Object(i.jsx)("h1",{children:"Join"}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{placeholder:"Name",type:"text",onChange:function(e){return c(e.target.value)}})}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{placeholder:"Room",className:" mt-20",type:"text",onChange:function(e){return s(e.target.value)}})}),Object(i.jsx)(d.b,{onClick:function(e){return n&&o?null:e.preventDefault()},to:"/join/chat?name=".concat(n,"&room=").concat(o),children:Object(i.jsx)("button",{className:"button mt-20",type:"submit",children:"Sign In"})})]})})}),Ie=n(353),Se=n.n(Ie),ke=n(354),we=n.n(ke),Pe=(n(435),n(436),function(e){var t=e.room;return Object(i.jsxs)("div",{id:"infobar",children:[Object(i.jsxs)("div",{className:"leftInnerContainer",children:[Object(i.jsx)("img",{className:"onlineIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII=",alt:"online icon"}),Object(i.jsx)("h3",{children:t})]}),Object(i.jsxs)("div",{className:"rightInnerContainer",children:[Object(i.jsx)("a",{href:"/video",target:"_blank",children:Object(i.jsx)("img",{className:"videoIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAQAAAAn3TzeAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflAQMPGSOXszmYAAAA/klEQVQ4y93TLUuDURjG8d8z51ZWnC9hS8KiyWDQDyBYDb6Fid2kRQRNIpgEm2F1GiyyzyCKwY+gSWFsQ8SBTvAxOJEpbs8Gll3p3If7fy7OfXPRvwowZFxC+GfHq1uPPy9n7Bj11ubpQWVbblqxSxcONdpgSRuyVrw06wE5Hkx2/MqUa9nmOefAXZy2Tp9qIIaMvHl1w/GIowulzVlVta2iFA0LjSl4cuTcswmiuxUV1L7KWCQoUHH6DUXFfulfsdCIBenu3QJLzixLdTeSsjVF607MSkZfQKDmWEnenrpUDImOUALvuLdv0ZVqtARsyrQmIDBtt5e89ZTuftYHbppAbogiCw0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjEtMDEtMDNUMTU6MjU6MzUtMDU6MDDmyy0TAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIxLTAxLTAzVDE1OjI1OjM1LTA1OjAwl5aVrwAAAABJRU5ErkJggg==",alt:"video call"})}),Object(i.jsx)("a",{href:"/join",children:Object(i.jsx)("img",{className:"closeIcon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII=",alt:"close icon"})})]})]})}),Ne=(n(437),function(e){var t=e.setMessage,n=e.sendMessage,c=e.message;return Object(i.jsxs)("form",{id:"input",children:[Object(i.jsx)("input",{type:"text",placeholder:"Type a message...",value:c,onChange:function(e){var n=e.target.value;return t(n)},onKeyPress:function(e){return"Enter"===e.key?n(e):null}}),Object(i.jsx)("button",{type:"button",onClick:function(e){return n(e)},children:"Send"})]})}),Ee=n(355),Re=n.n(Ee),Te=n(248),De=n.n(Te),Le=(n(458),function(e){var t=e.message,n=t.text,c=t.user,r=!1,a=e.name.trim().toLowerCase();return c===a&&(r=!0),r?Object(i.jsxs)("div",{className:"messageContainer justifyEnd",children:[Object(i.jsx)("p",{className:"sentText pr-10",children:a}),Object(i.jsx)("div",{className:"messageBox backgroundBlue",children:Object(i.jsx)("p",{className:"messageText colorWhite",children:De.a.emojify(n)})})]}):Object(i.jsxs)("div",{className:"messageContainer justifyStart",children:[Object(i.jsx)("div",{className:"messageBox backgroundLight",children:Object(i.jsx)("p",{className:"messageText colorDark",children:De.a.emojify(n)})}),Object(i.jsx)("p",{className:"sentText pl-10 ",children:c})]})}),Ue=(n(459),function(e){var t=e.messages,n=e.name;return Object(i.jsx)(Re.a,{className:"messages",children:t.map((function(e,t){return Object(i.jsx)("div",{children:Object(i.jsx)(Le,{message:e,name:n})},t)}))})}),Qe=function(e){var t=e.location,n=Object(u.useState)(""),c=Object(x.a)(n,2),r=c[0],a=c[1],o=Object(u.useState)(""),s=Object(x.a)(o,2),l=s[0],j=s[1],b=Object(u.useState)(""),d=Object(x.a)(b,2),m=d[0],O=d[1],h=Object(u.useState)(""),p=Object(x.a)(h,2),f=p[0],g=p[1],A=Object(u.useState)([]),v=Object(x.a)(A,2),C=v[0],y=v[1],I="https://server-chatter.herokuapp.com";Object(u.useEffect)((function(){var e=Se.a.parse(t.search),n=e.room,c=e.name;ge=we()(I,{reconnectionAttempts:"Infinity"}),a(c),j(n),ge.emit("join",{name:c,room:n},(function(e){e&&alert(e)}))}),[I,t.search]),Object(u.useEffect)((function(){return ge.on("message",(function(e){y([].concat(Object(oe.a)(C),[e]))})),ge.on("roomData",(function(e){var t=e.users;O(t)})),function(){ge.emit("close"),ge.off()}}),[C,m]);return Object(i.jsx)("div",{id:"chat",children:Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)(Pe,{room:l}),Object(i.jsx)(Ue,{messages:C,name:r}),Object(i.jsx)(Ne,{message:f,setMessage:g,sendMessage:function(e){e.preventDefault(),f&&ge.emit("sendMessage",f,(function(){return g("")}))}})]})})},Me=n(351);var Be=function(){var e=Object(u.useState)([]),t=Object(x.a)(e,2),n=t[0],c=t[1];return Object(u.useEffect)((function(){fetch("https://newsapi.org/v2/top-headlines?country=us&apiKey=fd74d03c2c6148908edb8f2cb92723d3").then((function(e){return e.json()})).then((function(e){console.log(JSON.stringify(e)),c(e.articles),console.log("items",n)})).catch((function(e){return console.error(e)}))}),[]),console.log(n),Object(i.jsx)(M.a,{columns:3,children:Object(i.jsx)(Me.a,{centered:!0,children:n.map((function(e){return Object(i.jsx)(_.a,{href:e.url,header:e.title,description:e.description,meta:e.author})}))})})},_e=n(249),$e=n.n(_e),Fe=n(356),Ve=function(e){var t=e.username,n=e.handleUsernameChange,c=e.roomName,r=e.handleRoomNameChange,a=e.handleSubmit;return Object(i.jsxs)("form",{onSubmit:a,children:[Object(i.jsx)("h2",{children:"Enter a room"}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(i.jsx)("input",{type:"text",id:"name",value:t,onChange:n,required:!0})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"room",children:"Room name:"}),Object(i.jsx)("input",{type:"text",id:"room",value:c,onChange:r,required:!0})]}),Object(i.jsx)("button",{type:"submit",children:"Submit"})]})},Ge=n(357),Ye=n.n(Ge),Je=function(e){var t=e.participant,n=Object(u.useState)([]),c=Object(x.a)(n,2),r=c[0],a=c[1],o=Object(u.useState)([]),s=Object(x.a)(o,2),l=s[0],j=s[1],b=Object(u.useRef)(),d=Object(u.useRef)(),m=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};return Object(u.useEffect)((function(){a(m(t.videoTracks)),j(m(t.audioTracks));return t.on("trackSubscribed",(function(e){"video"===e.kind?a((function(t){return[].concat(Object(oe.a)(t),[e])})):"audio"===e.kind&&j((function(t){return[].concat(Object(oe.a)(t),[e])}))})),t.on("trackUnsubscribed",(function(e){"video"===e.kind?a((function(t){return t.filter((function(t){return t!==e}))})):"audio"===e.kind&&j((function(t){return t.filter((function(t){return t!==e}))}))})),function(){a([]),j([]),t.removeAllListeners()}}),[t]),Object(u.useEffect)((function(){var e=r[0];if(e)return e.attach(b.current),function(){e.detach()}}),[r]),Object(u.useEffect)((function(){var e=l[0];if(e)return e.attach(d.current),function(){e.detach()}}),[l]),Object(i.jsxs)("div",{className:"participant",children:[Object(i.jsx)("h3",{children:t.identity}),Object(i.jsx)("video",{ref:b,autoPlay:!0}),Object(i.jsx)("audio",{ref:d,autoPlay:!0,muted:!0})]})},We=function(e){var t=e.roomName,n=e.token,c=e.handleLogout,r=Object(u.useState)(null),a=Object(x.a)(r,2),o=a[0],s=a[1],l=Object(u.useState)([]),j=Object(x.a)(l,2),b=j[0],d=j[1];Object(u.useEffect)((function(){var e=function(e){d((function(t){return[].concat(Object(oe.a)(t),[e])}))},c=function(e){d((function(t){return t.filter((function(t){return t!==e}))}))};return Ye.a.connect(n,{name:t}).then((function(t){s(t),t.on("participantConnected",e),t.on("participantDisconnected",c),t.participants.forEach(e)})),function(){s((function(e){return e&&"connected"===e.localParticipant.state?(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),e.disconnect(),null):e}))}}),[t,n]);var m=b.map((function(e){return Object(i.jsx)(Je,{participant:e},e.sid)}));return Object(i.jsxs)("div",{className:"room",children:[Object(i.jsxs)("h2",{children:["Room: ",t]}),Object(i.jsx)("button",{type:"submit",onClick:c,children:"Log out"}),Object(i.jsx)("div",{className:"local-participant",children:o?Object(i.jsx)(Je,{participant:o.localParticipant},o.localParticipant.sid):""}),Object(i.jsx)("h3",{children:"Remote Participants"}),Object(i.jsx)("div",{className:"remote-participants",children:m})]})},qe=function(){var e=Object(u.useState)(""),t=Object(x.a)(e,2),n=t[0],c=t[1],r=Object(u.useState)(""),a=Object(x.a)(r,2),o=a[0],s=a[1],l=Object(u.useState)(null),j=Object(x.a)(l,2),b=j[0],d=j[1],m=Object(u.useCallback)((function(e){c(e.target.value)}),[]),O=Object(u.useCallback)((function(e){s(e.target.value)}),[]),h=Object(u.useCallback)(function(){var e=Object(Fe.a)($e.a.mark((function e(t){var c;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("https://server-chatter.herokuapp.com/video/token",{method:"POST",body:JSON.stringify({identity:n,room:o}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e.message)}));case 3:c=e.sent,d(c.token);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,n]),p=Object(u.useCallback)((function(e){d(null)}),[]);return b?Object(i.jsx)(We,{roomName:o,token:b,handleLogout:p}):Object(i.jsx)(Ve,{username:n,roomName:o,handleUsernameChange:m,handleRoomNameChange:O,handleSubmit:h})},Ke=(n(561),function(){return Object(i.jsxs)("div",{id:"video",children:[Object(i.jsx)("header",{children:Object(i.jsx)("h1",{children:"Video Chat"})}),Object(i.jsx)("main",{children:Object(i.jsx)(qe,{})})]})}),ze=h.a((function(){return Object(i.jsxs)(d.a,{children:[Object(i.jsxs)(O.a,{children:[Object(i.jsx)(pe,{}),Object(i.jsx)(m.b,{exact:!0,path:"/",component:le}),Object(i.jsx)(m.b,{exact:!0,path:"/posts/:postId",component:Ce}),Object(i.jsx)(m.b,{exact:!0,path:"/news",component:Be}),Object(i.jsx)(S,{exact:!0,path:"/login",component:U}),Object(i.jsx)(S,{exact:!0,path:"/register",component:me}),Object(i.jsx)(k,{exact:!0,path:"/video",component:Ke})]}),Object(i.jsx)(k,{exact:!0,path:"/join",component:ye}),Object(i.jsx)(k,{exact:!0,path:"/join/chat",component:Qe})]})}));var He=Object(l.createHttpLink)({uri:"https://server-chatter.herokuapp.com/graphql"}),Xe=Object(j.a)((function(){var e=localStorage.getItem("jwtToken");return{headers:{Authorization:e?"Bearer ".concat(e):""}}})),Ze=new l.ApolloClient({link:Xe.concat(He),cache:new l.InMemoryCache}),et=Object(i.jsx)(l.ApolloProvider,{client:Ze,children:Object(i.jsx)(I,{children:Object(i.jsx)(b.a,{fallback:function(){return Object(i.jsx)("div",{children:"Sentry has caught an error..."})},showDialog:!0,onMount:function(){return console.log("Sentry mounted")},onUnmount:function(){return console.log("Sentry unmounted")},children:Object(i.jsx)(ze,{})})})});a.a({dsn:"https://d300ebb9bd3d4a629e3c004d8bccb900@o497733.ingest.sentry.io/5574340",autoSessionTracking:!0,integrations:[new o.a.BrowserTracing],release:"Chatter".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SENTRY_KEY:"https://d300ebb9bd3d4a629e3c004d8bccb900@o497733.ingest.sentry.io/5574340",REACT_APP_SERVICE_ID:"service_cq1lphn",REACT_APP_TEMPLATE_ID:"template_2cjy2s5",REACT_APP_USER_ID:"user_YL0QphQPVpDYsNXWThcTP"}).npm_package_version),tracesSampleRate:1}),r.a.render(et,document.getElementById("root")),s()}},[[562,1,2]]]);
//# sourceMappingURL=main.6f9093a6.chunk.js.map